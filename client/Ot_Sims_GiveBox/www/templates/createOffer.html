<ion-view>

	<ion-nav-title class="nav-title green">
		Créer une offre
	</ion-nav-title>

	<ion-content>
	<div class="row">
		<div class="col">
		<form novalidate>
			<div class="row">
				<label class="item item-input item-select createOfferLabel spaceTop col" id="categorieLabel">
					<div class="input-label balanced offer-subtitle">
						Catégorie
					</div>
					<select ng-model="offer.categorie" ng-options="categorie.name group by categorie.parent for categorie in categories">
						<option value="">-- Choisir une catégorie --</option>
    			</select>
				</label>
			</div>

			<div class="row">
				<label class="item col createOfferLabel spaceTop">

					<div class="row balanced offer-subtitle">
						Ma position
					</div>

					<button class="button button-balanced generalCreateOfferButton" ng-click="updatePosition()">
						Utiliser mon GPS
					</button>


					<label class="item item-input">
				    <div class="input-label">
				      Code Postal
				    </div>
						<!--
						<input type="text" class="createOfferInput offer-textInput" ng-model="postcode" ng-change="findLocalityFromPostcode()" ng-pattern="regexPostalCode" placeholder="{{postcode}}"></input>
					-->
						<input id="postalCodeInput" type="text" class="createOfferInput offer-textInput" ng-model="postcode" ng-change="findLocalityFromPostcode(postcode)" value="postcode"></input>

					</label>


					<label class="item item-input item-select">
				    <div class="input-label">
				      Ville
				    </div>
						<select ng-model="town" ng-options="city for city in cities">
							<option value="">-- Votre ville --</option>
						</select>
				  </label>




					</label>
			</div>

			<div class="row">
				<label class="item item-input col createOfferLabel spaceTop" id="titleLabel">
					<input type="text" class="createOfferInput offer-textInput" ng-model="offer.title" placeholder="Titre de votre offre"></input>
				</label>
			</div>
			<div class="row">
				<label class="item item-input col createOfferLabel spaceTop" id="descriptionLabel">
					<input type="text" class="createOfferInput offer-textInput"  ng-model="offer.description" placeholder="Description de votre offre"></input>
				</label>
			</div>
			<div class="row">
				<div class="item createOfferLabel col spaceTop" id="picturesLabel">
					<div class="row">
						<label class="col balanced offer-subtitle" >Vos photos</label>
					</div>
					<a class="item item-list-detail">
						<ion-scroll direction="x">
							<img ng-repeat="image in allImages" ng-src="{{ image.src }}" ng-click="showImages($index)" class="image-list-thumb"/>
						</ion-scroll>
					</a>
					<div class="row">
						<div class="col col-50 text-center">
								<button class="button button-balanced item-icon-center generalCreateOfferButton" id="takePhotoButton" ng-click="takeAPhoto()">
									<i class="icon ion-android-camera"></i>
								</button>
						</div>
						<div class="col col-50 text-center">
								<button class="button button-balanced item-icon-center generalCreateOfferButton" id="takePhotoButton" ng-click="importAPhoto()">
									<i class="icon ion-android-folder-open"></i>
								</button>
						</div>
					</div>
				</div>
			</div>


			<div class="row">
				<div class="item createOfferLabel col spaceTop">
					<div class="row">
						<label class="col balanced offer-subtitle" >Vos vidéos</label>
					</div>
					<div class="row" id="offerImages">

					</div>
					<div class="row">
						<div class="col text-center">
								<button class="button button-balanced item-icon-center generalCreateOfferButton" ng-model="offer.video" id="takePhotoButton" ng-click="recordAVideo()">
									<i class="icon ion-android-film"></i>
								</button>
							</div>
						</div>
				</div>
			</div>


			<div class="row">
				<button class="button button-balanced item-icon-right generalCreateOfferButton spaceTop" id="createOfferButton" ng-click="sendNewOfferRequest(offer)">
					<i class="icon ion-android-add"></i>
					Créer votre offre
				</button>
			</div>
		</form>
		</div>

		<div>
			{{geolog}}
		</div>

	</div>
  </ion-content>

	<script id="templates/loading.html" type="text/ng-template">
		<ion-spinner class="light"></ion-spinner>
		<br />
		<span>Envoi des informations ...</span>
	</script>
</ion-view>
